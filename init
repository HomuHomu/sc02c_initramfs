#!/sbin/busybox sh

# dummy blocks extract
/sbin/busybox tar xvf /res/misc/dev.tar

# check boot rom
/sbin/busybox mount -t ext4 /dev/block/mmcblk0p9 /system
if [ "`/sbin/busybox grep secondary /system/build.prop`" ]; then
  /sbin/busybox umount /system
  # secondary rom boot
  /sbin/busybox mount -t ext4 /dev/block/mmcblk0p12 /system2
  if [ "`/sbin/busybox grep se.infra /system2/build.prop`" ]; then
    /sbin/busybox umount /system2
    exec /vendor/samsung/init.samsung secondary
  else
    /sbin/busybox umount /system2
    exec /vendor/aosp/init.aosp secondary
  fi
else
  # primary rom boot
  if [ "`/sbin/busybox grep se.infra /system/build.prop`" ]; then
    /sbin/busybox umount /system
    exec /vendor/samsung/init.samsung primary
  else
    /sbin/busybox umount /system
    exec /vendor/aosp/init.aosp primary
  fi
fi
